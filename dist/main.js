(()=>{"use strict";function e(e=null,l=null){return{value:e,next:l}}function l(l){let n=e(l);return{headNode:n,append:l=>{let o=n;for(;null!==o.next;)o=o.next;o.next=e(l)},prepend:l=>{let o=e(l);console.log(`new head ${o.value}`);let t=e(n.value,n.next);console.log(`old head ${t.value}`),o.next=t,n.value=o.value,n.next=o.next,console.log(`headNode ${n.value}`)},size:()=>{if(null==n.next&&null==n.value)return 0;let e=1,l=n;for(;null!==l.next;)l=l.next,e++;return e},head:()=>n,tail:()=>{let e=n;for(;null!==e.next;)e=e.next;return e},at:e=>{let l=n;for(let n=0;n<e;n++)l=l.next;return l},pop:()=>{null==n.next&&(n.value=null);let e=n,l={};for(;null!==e.next;)l=e,e=e.next;l.next=null},contains:e=>{let l=n;for(;null!==l.next;){if(l.value==e)return!0;l=l.next}return l.value==e},find:e=>{let l=n,o=0;for(;null!==l.next;){if(l.value==e)return o;l=l.next,o++}return l.value==e?o:null},toString:()=>{let e="",l=n;for(;null!==l.next;)e=e.concat(`( ${l.value.key} ) -> `),l=l.next;console.log(e.concat(`( ${l.value.key} ) -> null`))}}}let n=function(e){let n=new Array(e),o=e;const t=l=>{let n=0;for(let o=0;o<l.length;o++)n=(31*n+l.charCodeAt(o))%e;return console.log(`${l} is ${n}`),n},r=(e,l)=>{let n=l,o=0;for(;null!==n.next;){if(console.log(`findvalue.value is ${n.value.key}`),n.value.key==e)return o;n=n.next,o++}return n.value.key==e?o:null},a=()=>{let l=0;for(let o=0;o<e;o++)null==n[o]||(n[o].hasOwnProperty("headNode")?l+=n[o].size():l++);return l};return{myMap:n,hash:t,set:(r,u)=>{let s=t(r);if(console.log(`index is ${s}`),console.log(`key is ${r}`),s<0||s>=e)throw new Error("Trying to access index out of bound");if(.75*e<a()&&(()=>{let l=new Array(o);n.push(...l),e+=o})(),null==n[s]||n[s].key==r)n[s]={key:r,data:u};else if(null!=n[s]){console.log("RUH ROH theres a collision"),console.log(n[s]);let e=n[s];if(null==e.headNode){let o=l(e);o.append({key:r,data:u}),n[s]=o}else n[s].append({key:r,data:u})}},get:l=>{let o=t(l);if(o<0||o>=e)throw new Error("Trying to access index out of bound");if(n[o].key==l)return n[o].data;if(null!=n[o].headNode){let e=r(l,n[o].headNode);return n[o].at(e).value.data}return null},has:l=>{let o=t(l);if(o<0||o>=e)throw new Error("Trying to access index out of bound");return null!=n[o]&&(n[o].key==l||null!=n[o].headNode&&null!=r(l,n[o].headNode))},remove:o=>{let a=t(o);if(a<0||a>=e)throw new Error("Trying to access index out of bound");if(console.log("before:"),n[a].toString(),n[a].key==o&&null==n[a].headNode)return console.log("if not a linked list, just make it undefined"),n[a]=void 0,!0;if(n[a].headNode.value.key!=o||null==n[a].headNode.next){if(null!=n[a].headNode){console.log("if a linked list"),console.log("before:"),n[a].toString();let e=n[a],t=e.headNode,u=r(o,e.headNode);console.log(`i is ${u}`);let s=e.size(),d=l(e.headNode.value);for(let e=1;e<s;e++)e!=u&&d.append(t.next.value),t=t.next;return console.log("after:"),d.toString(),n[a]=d,!0}return!1}console.log("it's the first node"),n[a].headNode.value=n[a].headNode.next.value,n[a].headNode.next=n[a].headNode.next.next,console.log("after:"),n[a].toString()},length:a,clear:()=>{for(i=0;i<e;i++)n[i]=void 0},keys:()=>{let l=[],o=0;for(let t=0;t<e;t++){console.log(`myMap${t} is ${n[t]}`);let e=n[t];if(null==e);else if(e.hasOwnProperty("headNode")){console.log("its a linked list");for(let n=0;n<e.size();n++)l[o]=e.at(n).value.key,o++}else l[o]=e.key,o++}return console.log(l),l},values:()=>{let l=[],o=0;for(let t=0;t<e;t++)if(null==n[t]);else if(n[t].hasOwnProperty("headNode"))for(let e=0;e<n[t].size();e++)l[o]=n[t].at(e).value.data,o++;else null!=n[t].key&&(l[o]=n[t].data,o++);return console.log(l),l},entries:()=>{let l=[],o=0;for(let t=0;t<e;t++)null!=n[t]&&(l[o]=[n[t].key,n[t].value],o++);return console.log(l),l}}}(16);n.set("apple","red"),n.set("banana","yellow"),n.set("carrot","orange"),n.set("dog","brown"),n.set("elephant","gray"),n.set("frog","green"),n.set("grape","purple"),n.set("hat","black"),n.set("ice cream","white"),n.set("god","is good"),n.set("kite","pink"),n.set("lion","golden"),console.log(n),console.log(n.length()),n.keys(),console.log(n.length()),n.values(),console.log(n.myMap)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFBSSxRQUFTLE9BQ2xCWCxFQUFLVyxJQUFJLFNBQVUsVUFDbkJYLEVBQUtXLElBQUksU0FBVSxVQUNuQlgsRUFBS1csSUFBSSxNQUFPLFNBQ2hCWCxFQUFLVyxJQUFJLFdBQVksUUFDckJYLEVBQUtXLElBQUksT0FBUSxTQUNqQlgsRUFBS1csSUFBSSxRQUFTLFVBQ2xCWCxFQUFLVyxJQUFJLE1BQU8sU0FDaEJYLEVBQUtXLElBQUksWUFBYSxTQUN0QlgsRUFBS1csSUFBSSxNQUFPLFdBQ2hCWCxFQUFLVyxJQUFJLE9BQVEsUUFDakJYLEVBQUtXLElBQUksT0FBUSxVQUVqQi9CLFFBQVFDLElBQUltQixHQUNacEIsUUFBUUMsSUFBSW1CLEVBQUtNLFVBTWpCTixFQUFLMEIsT0FDTDlDLFFBQVFDLElBQUltQixFQUFLTSxVQUNqQk4sRUFBSzhCLFNBQ0xsRCxRQUFRQyxJQUFJbUIsRUFBS0MsTSIsInNvdXJjZXMiOlsid2VicGFjazovL2hhc2htYXAvLi9zcmMvbGlzdHMuanMiLCJ3ZWJwYWNrOi8vaGFzaG1hcC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBub2RlKHZhbHVlID0gbnVsbCwgbmV4dCA9IG51bGwpIHtcbiAgcmV0dXJuIHsgdmFsdWU6IHZhbHVlLCBuZXh0OiBuZXh0IH07XG59XG5cbmZ1bmN0aW9uIGxpbmtlZExpc3QoZmlyc3RWYWx1ZSkge1xuICBsZXQgaGVhZE5vZGUgPSBub2RlKGZpcnN0VmFsdWUpO1xuXG4gIGNvbnN0IGFwcGVuZCA9ICh2YWx1ZSkgPT4ge1xuICAgIGxldCBmaW5kVGFpbCA9IGhlYWROb2RlO1xuICAgIHdoaWxlIChmaW5kVGFpbC5uZXh0ICE9PSBudWxsKSB7XG4gICAgICBmaW5kVGFpbCA9IGZpbmRUYWlsLm5leHQ7XG4gICAgfVxuICAgIGZpbmRUYWlsLm5leHQgPSBub2RlKHZhbHVlKTtcbiAgfTtcblxuICBjb25zdCBwcmVwZW5kID0gKHZhbHVlKSA9PiB7XG4gICAgbGV0IG5ld0hlYWQgPSBub2RlKHZhbHVlKTtcbiAgICBjb25zb2xlLmxvZyhgbmV3IGhlYWQgJHtuZXdIZWFkLnZhbHVlfWApO1xuICAgIGxldCBvbGRIZWFkID0gbm9kZShoZWFkTm9kZS52YWx1ZSwgaGVhZE5vZGUubmV4dCk7XG4gICAgY29uc29sZS5sb2coYG9sZCBoZWFkICR7b2xkSGVhZC52YWx1ZX1gKTtcbiAgICBuZXdIZWFkLm5leHQgPSBvbGRIZWFkO1xuICAgIGhlYWROb2RlLnZhbHVlID0gbmV3SGVhZC52YWx1ZTtcbiAgICBoZWFkTm9kZS5uZXh0ID0gbmV3SGVhZC5uZXh0O1xuICAgIGNvbnNvbGUubG9nKGBoZWFkTm9kZSAke2hlYWROb2RlLnZhbHVlfWApO1xuICB9O1xuXG4gIGNvbnN0IHNpemUgPSAoKSA9PiB7XG4gICAgaWYgKGhlYWROb2RlLm5leHQgPT0gbnVsbCAmJiBoZWFkTm9kZS52YWx1ZSA9PSBudWxsKSByZXR1cm4gMDtcbiAgICBsZXQgaSA9IDE7XG4gICAgbGV0IGNvdW50ZXIgPSBoZWFkTm9kZTtcbiAgICB3aGlsZSAoY291bnRlci5uZXh0ICE9PSBudWxsKSB7XG4gICAgICBjb3VudGVyID0gY291bnRlci5uZXh0O1xuICAgICAgaSsrO1xuICAgIH1cbiAgICByZXR1cm4gaTtcbiAgfTtcblxuICBjb25zdCBoZWFkID0gKCkgPT4ge1xuICAgIHJldHVybiBoZWFkTm9kZTtcbiAgfTtcblxuICBjb25zdCB0YWlsID0gKCkgPT4ge1xuICAgIGxldCBmaW5kVGFpbCA9IGhlYWROb2RlO1xuICAgIHdoaWxlIChmaW5kVGFpbC5uZXh0ICE9PSBudWxsKSB7XG4gICAgICBmaW5kVGFpbCA9IGZpbmRUYWlsLm5leHQ7XG4gICAgfVxuICAgIHJldHVybiBmaW5kVGFpbDtcbiAgfTtcblxuICBjb25zdCBhdCA9IChpbmRleCkgPT4ge1xuICAgIGxldCBwb2ludGVyID0gaGVhZE5vZGU7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbmRleDsgaSsrKSB7XG4gICAgICBwb2ludGVyID0gcG9pbnRlci5uZXh0O1xuICAgIH1cbiAgICByZXR1cm4gcG9pbnRlcjtcbiAgfTtcblxuICBjb25zdCBwb3AgPSAoKSA9PiB7XG4gICAgaWYgKGhlYWROb2RlLm5leHQgPT0gbnVsbCkgaGVhZE5vZGUudmFsdWUgPSBudWxsO1xuICAgIGxldCBmaW5kVGFpbCA9IGhlYWROb2RlO1xuICAgIGxldCBuZXdUYWlsID0ge307XG4gICAgd2hpbGUgKGZpbmRUYWlsLm5leHQgIT09IG51bGwpIHtcbiAgICAgIG5ld1RhaWwgPSBmaW5kVGFpbDtcbiAgICAgIGZpbmRUYWlsID0gZmluZFRhaWwubmV4dDtcbiAgICB9XG4gICAgbmV3VGFpbC5uZXh0ID0gbnVsbDtcbiAgfTtcblxuICBjb25zdCBjb250YWlucyA9ICh2YWx1ZSkgPT4ge1xuICAgIGxldCBmaW5kVmFsdWUgPSBoZWFkTm9kZTtcbiAgICB3aGlsZSAoZmluZFZhbHVlLm5leHQgIT09IG51bGwpIHtcbiAgICAgIGlmIChmaW5kVmFsdWUudmFsdWUgPT0gdmFsdWUpIHJldHVybiB0cnVlO1xuICAgICAgZmluZFZhbHVlID0gZmluZFZhbHVlLm5leHQ7XG4gICAgfVxuICAgIHJldHVybiBmaW5kVmFsdWUudmFsdWUgPT0gdmFsdWU7XG4gIH07XG5cbiAgY29uc3QgZmluZCA9ICh2YWx1ZSkgPT4ge1xuICAgIGxldCBmaW5kVmFsdWUgPSBoZWFkTm9kZTtcbiAgICBsZXQgaSA9IDA7XG4gICAgd2hpbGUgKGZpbmRWYWx1ZS5uZXh0ICE9PSBudWxsKSB7XG4gICAgICBpZiAoZmluZFZhbHVlLnZhbHVlID09IHZhbHVlKSByZXR1cm4gaTtcbiAgICAgIGZpbmRWYWx1ZSA9IGZpbmRWYWx1ZS5uZXh0O1xuICAgICAgaSsrO1xuICAgIH1cbiAgICBpZiAoZmluZFZhbHVlLnZhbHVlID09IHZhbHVlKSByZXR1cm4gaTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfTtcblxuICBjb25zdCB0b1N0cmluZyA9ICgpID0+IHtcbiAgICBsZXQgdG9QcmludCA9IFwiXCI7XG4gICAgbGV0IGZpbmRWYWx1ZSA9IGhlYWROb2RlO1xuICAgIHdoaWxlIChmaW5kVmFsdWUubmV4dCAhPT0gbnVsbCkge1xuICAgICAgdG9QcmludCA9IHRvUHJpbnQuY29uY2F0KGAoICR7ZmluZFZhbHVlLnZhbHVlLmtleX0gKSAtPiBgKTtcbiAgICAgIGZpbmRWYWx1ZSA9IGZpbmRWYWx1ZS5uZXh0O1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKHRvUHJpbnQuY29uY2F0KGAoICR7ZmluZFZhbHVlLnZhbHVlLmtleX0gKSAtPiBudWxsYCkpO1xuICB9O1xuXG4gIHJldHVybiB7XG4gICAgaGVhZE5vZGUsXG4gICAgYXBwZW5kLFxuICAgIHByZXBlbmQsXG4gICAgc2l6ZSxcbiAgICBoZWFkLFxuICAgIHRhaWwsXG4gICAgYXQsXG4gICAgcG9wLFxuICAgIGNvbnRhaW5zLFxuICAgIGZpbmQsXG4gICAgdG9TdHJpbmcsXG4gIH07XG59XG5cbmV4cG9ydCB7IG5vZGUsIGxpbmtlZExpc3QgfTtcbiIsImltcG9ydCB7IG5vZGUsIGxpbmtlZExpc3QgfSBmcm9tIFwiLi9saXN0cy5qc1wiO1xuXG5mdW5jdGlvbiBIYXNoTWFwKHNpemUpIHtcbiAgbGV0IG15TWFwID0gbmV3IEFycmF5KHNpemUpO1xuICBsZXQgb3JpZ1NpemUgPSBzaXplO1xuICBsZXQgbG9hZEZhY3RvciA9IDAuNzU7XG5cbiAgY29uc3QgaGFzaCA9IChrZXkpID0+IHtcbiAgICBsZXQgaGFzaENvZGUgPSAwO1xuXG4gICAgY29uc3QgcHJpbWVOdW1iZXIgPSAzMTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleS5sZW5ndGg7IGkrKykge1xuICAgICAgaGFzaENvZGUgPSAocHJpbWVOdW1iZXIgKiBoYXNoQ29kZSArIGtleS5jaGFyQ29kZUF0KGkpKSAlIHNpemU7XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKGAke2tleX0gaXMgJHtoYXNoQ29kZX1gKTtcbiAgICByZXR1cm4gaGFzaENvZGU7XG4gIH07XG5cbiAgY29uc3QgZXhwYW5kID0gKCkgPT4ge1xuICAgIGxldCBhZGRPbiA9IG5ldyBBcnJheShvcmlnU2l6ZSk7XG4gICAgbXlNYXAucHVzaCguLi5hZGRPbik7XG4gICAgc2l6ZSArPSBvcmlnU2l6ZTtcbiAgfTtcblxuICAvL3dvcmtzXG4gIGNvbnN0IHNldCA9IChrZXksIGRhdGEpID0+IHtcbiAgICBsZXQgaW5kZXggPSBoYXNoKGtleSk7XG4gICAgY29uc29sZS5sb2coYGluZGV4IGlzICR7aW5kZXh9YCk7XG4gICAgY29uc29sZS5sb2coYGtleSBpcyAke2tleX1gKTtcbiAgICBpZiAoaW5kZXggPCAwIHx8IGluZGV4ID49IHNpemUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRyeWluZyB0byBhY2Nlc3MgaW5kZXggb3V0IG9mIGJvdW5kXCIpO1xuICAgIH1cbiAgICBpZiAoc2l6ZSAqIGxvYWRGYWN0b3IgPCBsZW5ndGgoKSkgZXhwYW5kKCk7XG5cbiAgICBpZiAobXlNYXBbaW5kZXhdID09IHVuZGVmaW5lZCB8fCBteU1hcFtpbmRleF0ua2V5ID09IGtleSkge1xuICAgICAgbXlNYXBbaW5kZXhdID0geyBrZXksIGRhdGEgfTtcbiAgICB9IGVsc2UgaWYgKG15TWFwW2luZGV4XSAhPSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiUlVIIFJPSCB0aGVyZXMgYSBjb2xsaXNpb25cIik7XG4gICAgICBjb25zb2xlLmxvZyhteU1hcFtpbmRleF0pO1xuXG4gICAgICBsZXQgZGF0YUluQnVja2V0ID0gbXlNYXBbaW5kZXhdO1xuXG4gICAgICBpZiAoZGF0YUluQnVja2V0LmhlYWROb2RlID09IHVuZGVmaW5lZCkge1xuICAgICAgICAvL25lZWQgdG8gY29udmVydCB0byBsaW5rZWQgbGlzdFxuICAgICAgICBsZXQgbmV3TGlzdCA9IGxpbmtlZExpc3QoZGF0YUluQnVja2V0KTtcbiAgICAgICAgbmV3TGlzdC5hcHBlbmQoeyBrZXksIGRhdGEgfSk7XG4gICAgICAgIG15TWFwW2luZGV4XSA9IG5ld0xpc3Q7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvL2l0J3MgYWxyZWFkeSBhIGxpbmtlZCBsaXN0XG4gICAgICAgIG15TWFwW2luZGV4XS5hcHBlbmQoeyBrZXksIGRhdGEgfSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8vd29ya3NcbiAgY29uc3QgZ2V0ID0gKGtleSkgPT4ge1xuICAgIGxldCBpbmRleCA9IGhhc2goa2V5KTtcbiAgICBpZiAoaW5kZXggPCAwIHx8IGluZGV4ID49IHNpemUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIlRyeWluZyB0byBhY2Nlc3MgaW5kZXggb3V0IG9mIGJvdW5kXCIpO1xuICAgIH1cbiAgICBpZiAobXlNYXBbaW5kZXhdLmtleSA9PSBrZXkpIHtcbiAgICAgIHJldHVybiBteU1hcFtpbmRleF0uZGF0YTtcbiAgICB9IGVsc2UgaWYgKG15TWFwW2luZGV4XS5oZWFkTm9kZSAhPSB1bmRlZmluZWQpIHtcbiAgICAgIGxldCBpID0gZmluZChrZXksIG15TWFwW2luZGV4XS5oZWFkTm9kZSk7XG4gICAgICByZXR1cm4gbXlNYXBbaW5kZXhdLmF0KGkpLnZhbHVlLmRhdGE7XG4gICAgfSBlbHNlIHJldHVybiBudWxsO1xuICB9O1xuXG4gIGNvbnN0IGhhcyA9IChrZXkpID0+IHtcbiAgICBsZXQgaW5kZXggPSBoYXNoKGtleSk7XG4gICAgaWYgKGluZGV4IDwgMCB8fCBpbmRleCA+PSBzaXplKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUcnlpbmcgdG8gYWNjZXNzIGluZGV4IG91dCBvZiBib3VuZFwiKTtcbiAgICB9XG4gICAgaWYgKG15TWFwW2luZGV4XSA9PSB1bmRlZmluZWQpIHJldHVybiBmYWxzZTtcbiAgICBlbHNlIGlmIChteU1hcFtpbmRleF0ua2V5ID09IGtleSkgcmV0dXJuIHRydWU7XG4gICAgZWxzZSBpZiAobXlNYXBbaW5kZXhdLmhlYWROb2RlICE9IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKGZpbmQoa2V5LCBteU1hcFtpbmRleF0uaGVhZE5vZGUpICE9IG51bGwpIHJldHVybiB0cnVlO1xuICAgICAgZWxzZSByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICAvL3dvcmtzLCBidXQgd2hhdCBpZiB3ZSByZW1vdmUgdGhlIGxhc3Qgb25lIGluIExMXG4gIGNvbnN0IHJlbW92ZSA9IChrZXkpID0+IHtcbiAgICBsZXQgaW5kZXggPSBoYXNoKGtleSk7XG4gICAgaWYgKGluZGV4IDwgMCB8fCBpbmRleCA+PSBzaXplKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUcnlpbmcgdG8gYWNjZXNzIGluZGV4IG91dCBvZiBib3VuZFwiKTtcbiAgICB9XG4gICAgY29uc29sZS5sb2coXCJiZWZvcmU6XCIpO1xuICAgIG15TWFwW2luZGV4XS50b1N0cmluZygpO1xuICAgIGlmIChteU1hcFtpbmRleF0ua2V5ID09IGtleSAmJiBteU1hcFtpbmRleF0uaGVhZE5vZGUgPT0gdW5kZWZpbmVkKSB7XG4gICAgICAvL2lmIG5vdCBhIGxpbmtlZCBsaXN0LCBqdXN0IG1ha2UgaXQgdW5kZWZpbmVkXG4gICAgICBjb25zb2xlLmxvZyhcImlmIG5vdCBhIGxpbmtlZCBsaXN0LCBqdXN0IG1ha2UgaXQgdW5kZWZpbmVkXCIpO1xuICAgICAgbXlNYXBbaW5kZXhdID0gdW5kZWZpbmVkO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIGlmIChcbiAgICAgIG15TWFwW2luZGV4XS5oZWFkTm9kZS52YWx1ZS5rZXkgPT0ga2V5ICYmXG4gICAgICBteU1hcFtpbmRleF0uaGVhZE5vZGUubmV4dCAhPSB1bmRlZmluZWRcbiAgICApIHtcbiAgICAgIC8vaWYgaXQgaXMgYSBsaW5rZWQgbGlzdCBhbmQgaXQncyB0aGUgZmlyc3Qgbm9kZVxuICAgICAgY29uc29sZS5sb2coYGl0J3MgdGhlIGZpcnN0IG5vZGVgKTtcbiAgICAgIG15TWFwW2luZGV4XS5oZWFkTm9kZS52YWx1ZSA9IG15TWFwW2luZGV4XS5oZWFkTm9kZS5uZXh0LnZhbHVlO1xuICAgICAgbXlNYXBbaW5kZXhdLmhlYWROb2RlLm5leHQgPSBteU1hcFtpbmRleF0uaGVhZE5vZGUubmV4dC5uZXh0O1xuICAgICAgY29uc29sZS5sb2coXCJhZnRlcjpcIik7XG4gICAgICBteU1hcFtpbmRleF0udG9TdHJpbmcoKTtcbiAgICB9IGVsc2UgaWYgKG15TWFwW2luZGV4XS5oZWFkTm9kZSAhPSB1bmRlZmluZWQpIHtcbiAgICAgIC8vaWYgYSBsaW5rZWQgbGlzdCBidXQgTk9UIHRoZSBmaXJzdCBub2RlXG5cbiAgICAgIGNvbnNvbGUubG9nKFwiaWYgYSBsaW5rZWQgbGlzdFwiKTtcbiAgICAgIGNvbnNvbGUubG9nKFwiYmVmb3JlOlwiKTtcbiAgICAgIG15TWFwW2luZGV4XS50b1N0cmluZygpO1xuICAgICAgbGV0IG15TGlzdCA9IG15TWFwW2luZGV4XTtcbiAgICAgIGxldCBmaW5kZXIgPSBteUxpc3QuaGVhZE5vZGU7XG4gICAgICBsZXQgaSA9IGZpbmQoa2V5LCBteUxpc3QuaGVhZE5vZGUpO1xuICAgICAgY29uc29sZS5sb2coYGkgaXMgJHtpfWApO1xuICAgICAgbGV0IHNpemUgPSBteUxpc3Quc2l6ZSgpO1xuXG4gICAgICAvL21ha2UgdGhlIGhlYWRub2RlLCBhc3N1bWluZyBpdHMgbm90IHdoYXQgd2UncmUgcmVtb3ZpbmdcbiAgICAgIGxldCBuZXdMaXN0ID0gbGlua2VkTGlzdChteUxpc3QuaGVhZE5vZGUudmFsdWUpO1xuXG4gICAgICBmb3IgKGxldCBrID0gMTsgayA8IHNpemU7IGsrKykge1xuICAgICAgICBpZiAoayAhPSBpKSB7XG4gICAgICAgICAgbmV3TGlzdC5hcHBlbmQoZmluZGVyLm5leHQudmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGZpbmRlciA9IGZpbmRlci5uZXh0O1xuICAgICAgfVxuICAgICAgY29uc29sZS5sb2coXCJhZnRlcjpcIik7XG4gICAgICBuZXdMaXN0LnRvU3RyaW5nKCk7XG4gICAgICBteU1hcFtpbmRleF0gPSBuZXdMaXN0O1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIHJldHVybiBmYWxzZTtcbiAgfTtcblxuICBjb25zdCBmaW5kID0gKHZhbHVlLCBoZWFkTm9kZSkgPT4ge1xuICAgIGxldCBmaW5kVmFsdWUgPSBoZWFkTm9kZTtcbiAgICBsZXQgaSA9IDA7XG4gICAgd2hpbGUgKGZpbmRWYWx1ZS5uZXh0ICE9PSBudWxsKSB7XG4gICAgICBjb25zb2xlLmxvZyhgZmluZHZhbHVlLnZhbHVlIGlzICR7ZmluZFZhbHVlLnZhbHVlLmtleX1gKTtcbiAgICAgIGlmIChmaW5kVmFsdWUudmFsdWUua2V5ID09IHZhbHVlKSByZXR1cm4gaTtcbiAgICAgIGZpbmRWYWx1ZSA9IGZpbmRWYWx1ZS5uZXh0O1xuICAgICAgaSsrO1xuICAgIH1cbiAgICBpZiAoZmluZFZhbHVlLnZhbHVlLmtleSA9PSB2YWx1ZSkgcmV0dXJuIGk7XG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgY29uc3QgbGVuZ3RoID0gKCkgPT4ge1xuICAgIGxldCBjb3VudCA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaXplOyBpKyspIHtcbiAgICAgIGlmIChteU1hcFtpXSA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgLy9kb25vdGhpbmdcbiAgICAgIH0gZWxzZSBpZiAobXlNYXBbaV0uaGFzT3duUHJvcGVydHkoXCJoZWFkTm9kZVwiKSkge1xuICAgICAgICBjb3VudCArPSBteU1hcFtpXS5zaXplKCk7XG4gICAgICB9IGVsc2UgY291bnQrKztcbiAgICB9XG4gICAgcmV0dXJuIGNvdW50O1xuICB9O1xuXG4gIGNvbnN0IGNsZWFyID0gKCkgPT4ge1xuICAgIGZvciAoaSA9IDA7IGkgPCBzaXplOyBpKyspIHtcbiAgICAgIG15TWFwW2ldID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBrZXlzID0gKCkgPT4ge1xuICAgIGxldCBhbGxLZXlzID0gW107XG4gICAgbGV0IGsgPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2l6ZTsgaSsrKSB7XG4gICAgICBjb25zb2xlLmxvZyhgbXlNYXAke2l9IGlzICR7bXlNYXBbaV19YCk7XG4gICAgICBsZXQgYnVja2V0ID0gbXlNYXBbaV07XG4gICAgICBpZiAoYnVja2V0ID09IHVuZGVmaW5lZCkge1xuICAgICAgICAvKmRvIG5vdGhpbmcgKi9cbiAgICAgIH0gZWxzZSBpZiAoYnVja2V0Lmhhc093blByb3BlcnR5KFwiaGVhZE5vZGVcIikpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJpdHMgYSBsaW5rZWQgbGlzdFwiKTtcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBidWNrZXQuc2l6ZSgpOyBqKyspIHtcbiAgICAgICAgICBhbGxLZXlzW2tdID0gYnVja2V0LmF0KGopLnZhbHVlLmtleTtcbiAgICAgICAgICBrKys7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFsbEtleXNba10gPSBidWNrZXQua2V5O1xuICAgICAgICBrKys7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKGFsbEtleXMpO1xuICAgIHJldHVybiBhbGxLZXlzO1xuICB9O1xuXG4gIGNvbnN0IHZhbHVlcyA9ICgpID0+IHtcbiAgICBsZXQgYWxsVmFsdWVzID0gW107XG4gICAgbGV0IGsgPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2l6ZTsgaSsrKSB7XG4gICAgICBpZiAobXlNYXBbaV0gPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIC8vZG8gbm90aGluZ1xuICAgICAgfSBlbHNlIGlmIChteU1hcFtpXS5oYXNPd25Qcm9wZXJ0eShcImhlYWROb2RlXCIpKSB7XG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgbXlNYXBbaV0uc2l6ZSgpOyBqKyspIHtcbiAgICAgICAgICBhbGxWYWx1ZXNba10gPSBteU1hcFtpXS5hdChqKS52YWx1ZS5kYXRhO1xuICAgICAgICAgIGsrKztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChteU1hcFtpXS5rZXkgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGFsbFZhbHVlc1trXSA9IG15TWFwW2ldLmRhdGE7XG4gICAgICAgIGsrKztcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc29sZS5sb2coYWxsVmFsdWVzKTtcbiAgICByZXR1cm4gYWxsVmFsdWVzO1xuICB9O1xuXG4gIGNvbnN0IGVudHJpZXMgPSAoKSA9PiB7XG4gICAgbGV0IGFsbEVudHJpZXMgPSBbXTtcbiAgICBsZXQgayA9IDA7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaXplOyBpKyspIHtcbiAgICAgIGlmIChteU1hcFtpXSAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgYWxsRW50cmllc1trXSA9IFtteU1hcFtpXS5rZXksIG15TWFwW2ldLnZhbHVlXTtcbiAgICAgICAgaysrO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zb2xlLmxvZyhhbGxFbnRyaWVzKTtcbiAgICByZXR1cm4gYWxsRW50cmllcztcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIG15TWFwLFxuICAgIGhhc2gsXG4gICAgc2V0LFxuICAgIGdldCxcbiAgICBoYXMsXG4gICAgcmVtb3ZlLFxuICAgIGxlbmd0aCxcbiAgICBjbGVhcixcbiAgICBrZXlzLFxuICAgIHZhbHVlcyxcbiAgICBlbnRyaWVzLFxuICB9O1xufVxuXG5sZXQgdGVzdCA9IEhhc2hNYXAoMTYpO1xudGVzdC5zZXQoXCJhcHBsZVwiLCBcInJlZFwiKTtcbnRlc3Quc2V0KFwiYmFuYW5hXCIsIFwieWVsbG93XCIpO1xudGVzdC5zZXQoXCJjYXJyb3RcIiwgXCJvcmFuZ2VcIik7XG50ZXN0LnNldChcImRvZ1wiLCBcImJyb3duXCIpO1xudGVzdC5zZXQoXCJlbGVwaGFudFwiLCBcImdyYXlcIik7XG50ZXN0LnNldChcImZyb2dcIiwgXCJncmVlblwiKTtcbnRlc3Quc2V0KFwiZ3JhcGVcIiwgXCJwdXJwbGVcIik7XG50ZXN0LnNldChcImhhdFwiLCBcImJsYWNrXCIpO1xudGVzdC5zZXQoXCJpY2UgY3JlYW1cIiwgXCJ3aGl0ZVwiKTtcbnRlc3Quc2V0KFwiZ29kXCIsIFwiaXMgZ29vZFwiKTtcbnRlc3Quc2V0KFwia2l0ZVwiLCBcInBpbmtcIik7XG50ZXN0LnNldChcImxpb25cIiwgXCJnb2xkZW5cIik7XG5cbmNvbnNvbGUubG9nKHRlc3QpO1xuY29uc29sZS5sb2codGVzdC5sZW5ndGgoKSk7XG4vLyBjb25zb2xlLmxvZyh0ZXN0LmdldChcImZyb2dcIikpO1xuLy8gY29uc29sZS5sb2codGVzdC5nZXQoXCJnb2RcIikpO1xuLy8gdGVzdC5yZW1vdmUoXCJsaW9uXCIpO1xuLy8gY29uc29sZS5sb2codGVzdCk7XG4vLyBjb25zb2xlLmxvZyhgaGFzIGljZSBjcmVhbT8gJHt0ZXN0LmhhcyhcImljZSBjcmVhbVwiKX1gKTtcbnRlc3Qua2V5cygpO1xuY29uc29sZS5sb2codGVzdC5sZW5ndGgoKSk7XG50ZXN0LnZhbHVlcygpO1xuY29uc29sZS5sb2codGVzdC5teU1hcCk7XG4vLyB0ZXN0LmVudHJpZXMoKTtcbiJdLCJuYW1lcyI6WyJub2RlIiwidmFsdWUiLCJuZXh0IiwibGlua2VkTGlzdCIsImZpcnN0VmFsdWUiLCJoZWFkTm9kZSIsImFwcGVuZCIsImZpbmRUYWlsIiwicHJlcGVuZCIsIm5ld0hlYWQiLCJjb25zb2xlIiwibG9nIiwib2xkSGVhZCIsInNpemUiLCJpIiwiY291bnRlciIsImhlYWQiLCJ0YWlsIiwiYXQiLCJpbmRleCIsInBvaW50ZXIiLCJwb3AiLCJuZXdUYWlsIiwiY29udGFpbnMiLCJmaW5kVmFsdWUiLCJmaW5kIiwidG9TdHJpbmciLCJ0b1ByaW50IiwiY29uY2F0Iiwia2V5IiwidGVzdCIsIm15TWFwIiwiQXJyYXkiLCJvcmlnU2l6ZSIsImhhc2giLCJoYXNoQ29kZSIsImxlbmd0aCIsImNoYXJDb2RlQXQiLCJjb3VudCIsInVuZGVmaW5lZCIsImhhc093blByb3BlcnR5Iiwic2V0IiwiZGF0YSIsIkVycm9yIiwiYWRkT24iLCJwdXNoIiwiZXhwYW5kIiwiZGF0YUluQnVja2V0IiwibmV3TGlzdCIsImdldCIsImhhcyIsInJlbW92ZSIsIm15TGlzdCIsImZpbmRlciIsImsiLCJjbGVhciIsImtleXMiLCJhbGxLZXlzIiwiYnVja2V0IiwiaiIsInZhbHVlcyIsImFsbFZhbHVlcyIsImVudHJpZXMiLCJhbGxFbnRyaWVzIiwiSGFzaE1hcCJdLCJzb3VyY2VSb290IjoiIn0=